---
title: "5 Piping and Grouped Operations"
summary: "This lecture introduces you the %>% operator as neat way to organize your code."
author: Merlin Schaeffer & Friedolin Merhout
date: 2022-10-20
publishdate: 2021-09-03
---



<p>This lecture introduces you to piping as a neat way to organize your code and make it more legible. Moreover you will also learn how to quickly calculate and estimate statistics by sub-populations, so as to compare them.</p>
<pre class="r"><code>(ESS_cntry &lt;- ESS %&gt;% # use ESS, then
   group_by(cntry) %&gt;% # group by cntry, then
   summarize( # Start summarize function.
     # weighted number of cases,
     wn = sum(pspwght, na.rm = TRUE),
     # weighted cases reporting to belong to a discriminated religious minority,
     wn_rd = sum(rel_discr_num * pspwght, na.rm = TRUE), 
     wperc_rd = (wn_rd / wn) * 100 # weighted %,
   )) # End of summarize.
# # A tibble: 10 × 4
#    cntry         wn   wn_rd wperc_rd
#    &lt;fct&gt;      &lt;dbl&gt;   &lt;dbl&gt;    &lt;dbl&gt;
#  1 Bulgaria    5.73  0         0    
#  2 Czechia    29.5   0.187     0.634
#  3 Estonia    21.2   0.0720    0.340
#  4 Finland    11.0   0.296     2.70 
#  5 France    828.   87.4      10.5  
#  6 Croatia    40.7   1.50      3.69 
#  7 Hungary    11.6   0         0    
#  8 Lithuania   5.73  0.236     4.12 
#  9 Slovenia   19.6   0.429     2.19 
# 10 Slovakia    3.67  0         0</code></pre>
<p>This code shows how you can use <code>%&gt;%</code>, <code>group_by()</code> and <code>summarize()</code> to quickly estimate the share of persons of immigrant origin who feel that they belong to a discriminated religious minority in the country in which they live.</p>
<p>Lecture slides: <a href="/5-Piping/5-Piping.html"><strong>Piping and Grouped Operations</strong></a></p>
<p>Today’s exercise: <a href="/exercises/exercise5.html"><strong>Web Excercise 5</strong></a></p>
<div id="homework" class="section level1">
<h1>Homework</h1>
<p>Read <a href="http://r4ds.had.co.nz/transform.html#grouped-summaries-with-summarise">Chapter 5.6 &amp; 5.7 on grouped operations</a>.</p>
</div>
